{"ast":null,"code":"import _slicedToArray from\"/Users/kopcion/LearningFromHumanPreferences-master/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useRef}from'react';import axios from'axios';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function useForceUpdate(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];// integer state\nreturn function(){return setValue(function(value){return value+1;});};// update the state to force render\n}var SampleChoice=function SampleChoice(){var forceUpdate=useForceUpdate();// const [episodeNumber, setEpisodeNumber] = useState<number>(0);\nvar nextEpisodeAvailable=useRef(false);var episodeNumber=useRef(0);var submitChoice=function submitChoice(choice){axios.post(\"/human_choice/\".concat(choice)).then(function(res){nextEpisodeAvailable.current=false;forceUpdate();// setEpisodeNumber(res.data.displayed_episode);\n});};useEffect(function(){// axios.get('/episode_number')\n//   .then((res) => {\n//     episodeNumber.current = res.data.episode_number;\n//     nextEpisodeAvailable.current = !res.data.voted;\n//   })\n//   .catch(() => {\n//     console.log('not yet');\n//   });\n},[]);var checkNewEpisode=function checkNewEpisode(){axios.get('/episode_number').then(function(res){episodeNumber.current=res.data.episode_number;nextEpisodeAvailable.current=!res.data.voted;forceUpdate();}).catch(function(){console.log('not yet');});};var buttonStyle=\"bg-indigo-500 hover:bg-blue-500 p-2 active:bg-cyan-500 rounded-xl\";return/*#__PURE__*/_jsx(_Fragment,{children:nextEpisodeAvailable.current?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col mx-auto mt-28\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row mx-auto mb-10\",children:[\"Episode \",episodeNumber.current]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col mx-4\",children:[/*#__PURE__*/_jsx(\"video\",{className:\"rounded-xl\",autoPlay:true,loop:true,muted:true,width:\"320\",height:\"320\",src:\"videos/video_one_\".concat(episodeNumber.current,\".mp4\")}),/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(buttonStyle,\" mt-2\"),onClick:function onClick(){return submitChoice(1);},children:\"1\"}),/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(buttonStyle,\" mt-2\"),onClick:function onClick(){return submitChoice(3);},children:\"Equally good\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col mx-4\",children:[/*#__PURE__*/_jsx(\"video\",{className:\"rounded-xl\",autoPlay:true,loop:true,muted:true,width:\"320\",height:\"320\",src:\"videos/video_two_\".concat(episodeNumber.current,\".mp4\")}),/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(buttonStyle,\" mt-2\"),onClick:function onClick(){return submitChoice(2);},children:\"2\"}),/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(buttonStyle,\" mt-2\"),onClick:function onClick(){return submitChoice(4);},children:\"Discard\"})]})]})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-items-center w-screen h-screen\",children:/*#__PURE__*/_jsx(\"button\",{onClick:checkNewEpisode,className:\"\".concat(buttonStyle,\" m-auto\"),children:\"Go to the next episode\"})})});};export default SampleChoice;","map":{"version":3,"sources":["/Users/kopcion/LearningFromHumanPreferences-master/frontend/src/components/SampleChoice.tsx"],"names":["React","useEffect","useState","useRef","axios","useForceUpdate","value","setValue","SampleChoice","forceUpdate","nextEpisodeAvailable","episodeNumber","submitChoice","choice","post","then","res","current","checkNewEpisode","get","data","episode_number","voted","catch","console","log","buttonStyle"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport axios from 'axios';\n\nfunction useForceUpdate(){\n  const [value, setValue] = useState(0); // integer state\n  return () => setValue(value => value + 1); // update the state to force render\n}\n\nconst SampleChoice: React.FC = () => {\n  const forceUpdate = useForceUpdate();\n  // const [episodeNumber, setEpisodeNumber] = useState<number>(0);\n  const nextEpisodeAvailable = useRef<boolean>(false);\n  const episodeNumber = useRef<number>(0);\n  const submitChoice = (choice: number) => {\n    axios.post(`/human_choice/${choice}`)\n      .then(res => {\n        nextEpisodeAvailable.current = false;\n        forceUpdate();\n        // setEpisodeNumber(res.data.displayed_episode);\n      });\n  };\n\n  useEffect(()=>{\n    // axios.get('/episode_number')\n    //   .then((res) => {\n    //     episodeNumber.current = res.data.episode_number;\n    //     nextEpisodeAvailable.current = !res.data.voted;\n    //   })\n    //   .catch(() => {\n    //     console.log('not yet');\n    //   });\n  },[]);\n\n  const checkNewEpisode = () => {\n    axios.get('/episode_number')\n      .then((res) => {\n        episodeNumber.current = res.data.episode_number;\n        nextEpisodeAvailable.current = !res.data.voted;\n        forceUpdate();\n      })\n      .catch(() => {\n        console.log('not yet');\n      });\n  };\n  const buttonStyle = \"bg-indigo-500 hover:bg-blue-500 p-2 active:bg-cyan-500 rounded-xl\";\n  return (\n    <>\n      {nextEpisodeAvailable.current ? \n        <>\n          <div className=\"flex flex-col mx-auto mt-28\">\n            <div className=\"flex flex-row mx-auto mb-10\">\n                {/* Episode {episodeNumber} */}\n                Episode {episodeNumber.current}\n            </div>\n            <div className=\"flex flex-row\">\n              <div className=\"flex flex-col mx-4\">\n                {/* <video className=\"rounded-xl\" autoPlay loop muted width=\"320\" height=\"320\" src={`videos/video_one_${episodeNumber}.mp4`}/> */}\n                <video className=\"rounded-xl\" autoPlay loop muted width=\"320\" height=\"320\" src={`videos/video_one_${episodeNumber.current}.mp4`}/>\n                <button className={`${buttonStyle} mt-2`} onClick={()=>(submitChoice(1))}>1</button>\n                <button className={`${buttonStyle} mt-2`} onClick={()=>(submitChoice(3))}>Equally good</button>\n              </div>\n              <div className=\"flex flex-col mx-4\">\n                {/* <video className=\"rounded-xl\" autoPlay loop muted width=\"320\" height=\"320\" src={`videos/video_two_${episodeNumber}.mp4`}/> */}\n                <video className=\"rounded-xl\" autoPlay loop muted width=\"320\" height=\"320\" src={`videos/video_two_${episodeNumber.current}.mp4`}/>\n                <button className={`${buttonStyle} mt-2`} onClick={()=>(submitChoice(2))}>2</button>\n                <button className={`${buttonStyle} mt-2`} onClick={()=>(submitChoice(4))}>Discard</button>\n              </div>\n            </div>\n          </div>\n        </>\n      :\n        <div className=\"flex justify-items-center w-screen h-screen\">\n          <button onClick={checkNewEpisode} className={`${buttonStyle} m-auto`}>\n            Go to the next episode\n          </button>\n        </div>\n      }\n    </>\n  );\n};\n\nexport default SampleChoice;\n"]},"metadata":{},"sourceType":"module"}